class Player{constructor(fullname,school){this.FullName=fullname;this.School=school;this.Email=null;} AddEmail(email) {this.Email = email;}} var TeamNameInput=$("input[name='teamname']"),TeamTagInput=$("input[name='teamtag']"),Players=[];function ProcessSignup(e){$(e).attr("disabled",!0),$(e).addClass("signup-button-disabled"),Players=[],ResetInputColors(),HasErrors()||TryInsertTeam(),$(e).attr("disabled",!1),$(e).removeClass("signup-button-disabled")}function TryInsertTeam(){$.ajax({type:"POST",data:{teamname:TeamNameInput.val(),teamtag:TeamTagInput.val(),selectedgame:new URLSearchParams(window.location.search).get("selectedgame"),players:JSON.stringify(Players)},url:"php/InsertTeam.php",success:function(e){var a;a=e,console.log(a),$("html, body").animate({scrollTop:0},"slow"),"SUCCESS_SIGNUP"==a?window.location.href="signup.php?selectedgame="+getUrlParameter("selectedgame")+"&signupSuccess":"ERR_SIGNUPS_FULL"==a?($("#error-alert p").text("Ni več možnih prijav!"),$("#error-alert").css("display","block")):"ERR_INSERT_TEAM"==a?($("#error-alert p").text("Napaka pri prijavi ekipe! Preglejte Ime in Kratico!"),$("#error-alert").css("display","block")):($("#error-alert p").text("Neznana napaka: "+a),$("#error-alert").css("display","block"))},error:function(e){console.log("ERROR: "+e)}})}function HasErrors(){var e=!1;(TeamNameInput.val().length>50||TeamNameInput.val().length<=0)&&(TeamNameInput.addClass("input_error"),e=!0),(TeamTagInput.val().length>4||TeamTagInput.val().length<=0)&&(TeamTagInput.addClass("input_error"),e=!0);for(var a=1;a<6;a++){var r=$("input[name='p"+a+"-fullname']"),t=$("input[name='p"+a+"-school']");(r.val().length>150||r.val().length<=0)&&(r.addClass("input_error"),e=!0),(t.val().length>150||t.val().length<=0)&&(t.addClass("input_error"),e=!0);var n=new Player(r.val(),t.val());if(n.AddEmail(null),1==a){var l=$("input[name='p"+a+"-email']");(l.val().length>150||l.val().length<=0)&&(l.addClass("input_error"),e=!0),validateEmail(l.val())||(l.addClass("input_error"),e=!0),n.AddEmail(l.val())}Players.push(n)}return!!e}function ResetInputColors(){TeamNameInput.removeClass("input_error"),TeamTagInput.removeClass("input_error"),$("input[name='p1-email']").removeClass("input_error");for(var e=1;e<6;e++)$("input[name='p"+e+"-fullname']").removeClass("input_error"),$("input[name='p"+e+"-gamecontact']").removeClass("input_error"),$("input[name='p"+e+"-school']").removeClass("input_error")}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var getUrlParameter=function(e){var a,r,t=decodeURIComponent(window.location.search.substring(1)).split("&");for(r=0;r<t.length;r++)if((a=t[r].split("="))[0]===e)return void 0===a[1]||a[1]};$(document).ready(function(){$("body, html").css("display","block")});
